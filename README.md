# Discord Music Bot

–ü—Ä–æ—Å—Ç–∏–π, –∞–ª–µ –ø–æ—Ç—É–∂–Ω–∏–π –º—É–∑–∏—á–Ω–∏–π –±–æ—Ç –¥–ª—è Discord.

## üó∫Ô∏è –ü–ª–∞–Ω —Ä–æ–∑–≤–∏—Ç–∫—É –ø—Ä–æ–µ–∫—Ç—É: –ü—Ä–∞–∫—Ç–∏–∫–∞ ‚Üí –î–∏–ø–ª–æ–º–Ω–∞ —Ä–æ–±–æ—Ç–∞

–ù–∏–∂—á–µ –Ω–∞–≤–µ–¥–µ–Ω–æ –æ–Ω–æ–≤–ª–µ–Ω–∏–π, –∑–±–∞–ª–∞–Ω—Å–æ–≤–∞–Ω–∏–π –ø–ª–∞–Ω —Ä–æ–±—ñ—Ç.
**–†–æ–∑–ø–æ–¥—ñ–ª –Ω–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è**:
- **–°—Ç—É–¥–µ–Ω—Ç 1 (System Architect)**: "Deep Backend" ‚Äî –ë–∞–∑–∏ –¥–∞–Ω–∏—Ö, —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ—Ü–µ—Å—ñ–≤, —Å—Ç–∞–±—ñ–ª—å–Ω—ñ—Å—Ç—å —Ç–∞ —ñ–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞.
- **–°—Ç—É–¥–µ–Ω—Ç 2 (Product Engineer)**: "Business Logic & Visuals" ‚Äî –õ–æ–≥—ñ–∫–∞ —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ–π (YouTube/Spotify), –∞–ª–≥–æ—Ä–∏—Ç–º–∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ–π —Ç–∞ Web UI.

---

### üéì –ï—Ç–∞–ø 1: –ü—Ä–∞–∫—Ç–∏—á–Ω–∞ —Ä–æ–±–æ—Ç–∞
*–¶—ñ–ª—å: –°—Ç–∞–±—ñ–ª—ñ–∑–∞—Ü—ñ—è —è–¥—Ä–∞ —Ç–∞ –ø–æ–∫—Ä–∞—â–µ–Ω–Ω—è –ª–æ–≥—ñ–∫–∏ —Ä–æ–±–æ—Ç–∏ –∑ –¥–∞–Ω–∏–º–∏.*

#### üë§ –°—Ç—É–¥–µ–Ω—Ç 1 ‚Äî Core Systems (Internal State)
1.  **Queue & Player Engine**:
    *   [ ] `QueueService`: –†–µ–∞–ª—ñ–∑–∞—Ü—ñ—è –≤–ª–∞—Å–Ω–æ—ó —á–µ—Ä–≥–∏ (Linked List) –∑ –º–µ—Ç–æ–¥–∞–º–∏ shuffle/move.
    *   [ ] `PlayerController`: –ö–µ—Ä—É–≤–∞–Ω–Ω—è –ø—Ä–æ—Ü–µ—Å–æ–º `ffmpeg` (–∑–∞–ø–æ–±—ñ–≥–∞–Ω–Ω—è "–∑–æ–º–±—ñ"-–ø—Ä–æ—Ü–µ—Å–∞–º).
2.  **–ë–∞–∑–∞ –î–∞–Ω–∏—Ö & –í—ñ–¥–Ω–æ–≤–ª–µ–Ω–Ω—è**:
    *   [ ] –ü—Ä–æ–µ–∫—Ç—É–≤–∞–Ω–Ω—è —Å—Ö–µ–º–∏ –ë–î SQLite (ORM `aiosqlite`).
    *   [ ] **Auto-Resume**: –õ–æ–≥—ñ–∫–∞ "—Å–µ—Ä—ñ–∞–ª—ñ–∑–∞—Ü—ñ—ó" —Å—Ç–∞–Ω—É –±–æ—Ç–∞ –ø—Ä–∏ –≤–∏–º–∫–Ω–µ–Ω–Ω—ñ, —â–æ–± –ø—ñ—Å–ª—è –∑–∞–ø—É—Å–∫—É —á–µ—Ä–≥–∞ –≤—ñ–¥–Ω–æ–≤–∏–ª–∞—Å—å.

#### üë§ –°—Ç—É–¥–µ–Ω—Ç 2 ‚Äî Integrations (External State)
1.  **Source & Search Logic**:
    *   [ ] `SourceService`: –ù–∞–ø–∏—Å–∞–Ω–Ω—è –æ–±–≥–æ—Ä—Ç–∫–∏ –Ω–∞–¥ `yt-dlp`.
    *   [ ] –û–±—Ä–æ–±–∫–∞ –ø–æ—à—É–∫–æ–≤–∏—Ö –∑–∞–ø–∏—Ç—ñ–≤, —Ä–æ–∑–ø—ñ–∑–Ω–∞–≤–∞–Ω–Ω—è —Ç–∏–ø—ñ–≤ –ø–æ—Å–∏–ª–∞–Ω—å (–≤—ñ–¥–µ–æ/–ø–ª–µ–π–ª–∏—Å—Ç/—Å—Ç—Ä—ñ–º).
    *   [ ] –ü–æ–∫—Ä–∞—â–µ–Ω–Ω—è Slash Commands (`/play` –∑ –≤–∞–ª—ñ–¥–∞—Ü—ñ—î—é —Ç–∏–ø—ñ–≤).
2.  **User Interactions**:
    *   [ ] –Ü–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∏–π –ø–ª–µ—î—Ä (–ö–Ω–æ–ø–∫–∏ Play/Pause/Skip), —è–∫–∏–π —Ä–µ–∞–≥—É—î –Ω–∞ —Å—Ç–∞–Ω (–±–ªo–∫—É–≤–∞–Ω–Ω—è –∫–Ω–æ–ø–æ–∫).
    *   [ ] **YouTube Auth**: –†–µ–∞–ª—ñ–∑–∞—Ü—ñ—è OAuth2 flow –¥–ª—è –¥–æ—Å—Ç—É–ø—É –¥–æ –ø—Ä–∏–≤–∞—Ç–Ω–∏—Ö –ø–ª–µ–π–ª–∏—Å—Ç—ñ–≤ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞.

---

### üéì –ï—Ç–∞–ø 2: –î–∏–ø–ª–æ–º–Ω–∞ —Ä–æ–±–æ—Ç–∞
*–¶—ñ–ª—å: –ü–µ—Ä–µ—Ç–≤–æ—Ä–µ–Ω–Ω—è –±–æ—Ç–∞ –Ω–∞ –ø–ª–∞—Ç—Ñ–æ—Ä–º—É (Web + AI).*

#### üë§ –°—Ç—É–¥–µ–Ω—Ç 1 ‚Äî Infrastructure & API
1.  **API Layer (FastAPI)**:
    *   [ ] –†–æ–∑—Ä–æ–±–∫–∞ REST API –¥–ª—è –∑–æ–≤–Ω—ñ—à–Ω—å–æ–≥–æ –∫–µ—Ä—É–≤–∞–Ω–Ω—è.
    *   [ ] –†–µ–∞–ª—ñ–∑–∞—Ü—ñ—è WebSockets –¥–ª—è —Å—Ç—Ä—ñ–º—ñ–Ω–≥—É –ª–æ–≥—ñ–≤/—Å—Ç–∞—Ç—É—Å—É.
2.  **DevOps Suite**:
    *   [ ] Containerization: Docker (Multi-stage builds).
    *   [ ] CI/CD: GitHub Actions (Tests & Registry).
    *   [ ] Monitoring: Prometheus metrics export.

#### üë§ –°—Ç—É–¥–µ–Ω—Ç 2 ‚Äî Frontend & Algorithms
1.  **Web Dashboard (SPA)**:
    *   [ ] React/Next.js –¥–æ–¥–∞—Ç–æ–∫ –¥–ª—è –∫–µ—Ä—É–≤–∞–Ω–Ω—è –±–æ—Ç–æ–º.
    *   [ ] –°–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—è "Frontend <-> API" —á–µ—Ä–µ–∑ WebSockets.
2.  **Intelligent Features**:
    *   **Recommendation Engine**: –†–µ–∞–ª—ñ–∑–∞—Ü—ñ—è –∞–ª–≥–æ—Ä–∏—Ç–º—É (Content-Based) –¥–ª—è –∞–≤—Ç–æ-–ø—ñ–¥–±–æ—Ä—É —Ç—Ä–µ–∫—ñ–≤.
    *   **Audio DSP**: –ü–æ–±—É–¥–æ–≤–∞ —Å–∫–ª–∞–¥–Ω–∏—Ö –≥—Ä–∞—Ñ—ñ–≤ —Ñ—ñ–ª—å—Ç—Ä—ñ–≤ FFmpeg (Nightcore, Reverb) —á–µ—Ä–µ–∑ UI.
    *   **Smart DJ**: –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è TTS –¥–ª—è –æ–∑–≤—É—á–∫–∏ –ø–µ—Ä–µ—Ö–æ–¥—ñ–≤.

---


## –§—É–Ω–∫—Ü—ñ—ó (–ü–æ—Ç–æ—á–Ω–∏–π —Å—Ç–∞–Ω)

1.  **–ö–ª–æ–Ω—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ–π:**
    ```bash
    git clone <URL_–†–ï–ü–û–ó–ò–¢–û–†–Ü–Æ> # –ó–∞–º—ñ–Ω—ñ—Ç—å –Ω–∞ URL –≤–∞—à–æ–≥–æ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—é, —è–∫—â–æ –≤—ñ–Ω —î
    cd discord-music-bot
    ```

2.  **–°—Ç–≤–æ—Ä—ñ—Ç—å —Ç–∞ –∞–∫—Ç–∏–≤—É–π—Ç–µ –≤—ñ—Ä—Ç—É–∞–ª—å–Ω–µ —Å–µ—Ä–µ–¥–æ–≤–∏—â–µ (—Ä–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–æ):**
    ```bash
    python3 -m venv venv
    source venv/bin/activate  # –î–ª—è macOS/Linux
    # venv\Scripts\activate  # –î–ª—è Windows
    ```

3.  **–í—Å—Ç–∞–Ω–æ–≤—ñ—Ç—å –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ:**
    ```bash
    pip install -r requirements.txt
    ```
    *–ü—Ä–∏–º—ñ—Ç–∫–∞:* –í–∞–º —Ç–∞–∫–æ–∂ –º–æ–∂–µ –∑–Ω–∞–¥–æ–±–∏—Ç–∏—Å—è –≤—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ [FFmpeg](https://ffmpeg.org/download.html) —É –≤–∞—à—ñ–π —Å–∏—Å—Ç–µ–º—ñ, —è–∫—â–æ –π–æ–≥–æ —â–µ –Ω–µ–º–∞—î.*

4.  **–°—Ç–≤–æ—Ä—ñ—Ç—å —Ñ–∞–π–ª `.env`:**
    –£ –∫–æ—Ä–µ–Ω–µ–≤—ñ–π –ø–∞–ø—Ü—ñ –ø—Ä–æ–µ–∫—Ç—É —Å—Ç–≤–æ—Ä—ñ—Ç—å —Ñ–∞–π–ª –∑ –Ω–∞–∑–≤–æ—é `.env` —Ç–∞ –¥–æ–¥–∞–π—Ç–µ –¥–æ –Ω—å–æ–≥–æ —Ç–æ–∫–µ–Ω –≤–∞—à–æ–≥–æ Discord –±–æ—Ç–∞:
    ```
    DISCORD_TOKEN=–í–ê–®_–ë–û–¢_–¢–û–ö–ï–ù_–¢–£–¢
    ```
    –ó–∞–º—ñ–Ω—ñ—Ç—å `–í–ê–®_–ë–û–¢_–¢–û–ö–ï–ù_–¢–£–¢` –Ω–∞ —Å–ø—Ä–∞–≤–∂–Ω—ñ–π —Ç–æ–∫–µ–Ω –≤–∞—à–æ–≥–æ –±–æ—Ç–∞, —è–∫–∏–π –º–æ–∂–Ω–∞ –æ—Ç—Ä–∏–º–∞—Ç–∏ –Ω–∞ [–ü–æ—Ä—Ç–∞–ª—ñ —Ä–æ–∑—Ä–æ–±–Ω–∏–∫—ñ–≤ Discord](https://discord.com/developers/applications).

## –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞

–ü–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—è, —â–æ –≤–∞—à–µ –≤—ñ—Ä—Ç—É–∞–ª—å–Ω–µ —Å–µ—Ä–µ–¥–æ–≤–∏—â–µ –∞–∫—Ç–∏–≤–æ–≤–∞–Ω–µ, –∞ –ø–æ—Ç—ñ–º –∑–∞–ø—É—Å—Ç—ñ—Ç—å –≥–æ–ª–æ–≤–Ω–∏–π —Å–∫—Ä–∏–ø—Ç:

```bash
python3 main.py
```

## –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è

–ü—ñ—Å–ª—è –∑–∞–ø—É—Å–∫—É –±–æ—Ç–∞ —Ç–∞ –∑–∞–ø—Ä–æ—à–µ–Ω–Ω—è –π–æ–≥–æ –Ω–∞ –≤–∞—à —Å–µ—Ä–≤–µ—Ä, –≤–∏ –º–æ–∂–µ—Ç–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –Ω–∞—Å—Ç—É–ø–Ω—ñ –∫–æ–º–∞–Ω–¥–∏ (–ø—Ä–µ—Ñ—ñ–∫—Å –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º: `!`):

*   `!join`: –ü—ñ–¥–∫–ª—é—á–∏—Ç–∏ –±–æ—Ç–∞ –¥–æ –≤–∞—à–æ–≥–æ –≥–æ–ª–æ—Å–æ–≤–æ–≥–æ –∫–∞–Ω–∞–ª—É.
*   `!leave`: –í—ñ–¥–∫–ª—é—á–∏—Ç–∏ –±–æ—Ç–∞ –≤—ñ–¥ –≥–æ–ª–æ—Å–æ–≤–æ–≥–æ –∫–∞–Ω–∞–ª—É.
*   `!play <URL –∞–±–æ –ø–æ—à—É–∫–æ–≤–∏–π –∑–∞–ø–∏—Ç>`: –î–æ–¥–∞—Ç–∏ –ø—ñ—Å–Ω—é –¥–æ —á–µ—Ä–≥–∏ —Ç–∞ –ø–æ—á–∞—Ç–∏ –≤—ñ–¥—Ç–≤–æ—Ä–µ–Ω–Ω—è.
*   `!pause`: –ü–æ—Å—Ç–∞–≤–∏—Ç–∏ –≤—ñ–¥—Ç–≤–æ—Ä–µ–Ω–Ω—è –Ω–∞ –ø–∞—É–∑—É.
*   `!resume`: –í—ñ–¥–Ω–æ–≤–∏—Ç–∏ –≤—ñ–¥—Ç–≤–æ—Ä–µ–Ω–Ω—è.
*   `!skip`: –ü—Ä–æ–ø—É—Å—Ç–∏—Ç–∏ –ø–æ—Ç–æ—á–Ω–∏–π —Ç—Ä–µ–∫.
*   `!stop`: –ó—É–ø–∏–Ω–∏—Ç–∏ –≤—ñ–¥—Ç–≤–æ—Ä–µ–Ω–Ω—è —Ç–∞ –æ—á–∏—Å—Ç–∏—Ç–∏ —á–µ—Ä–≥—É.
*   `!queue`: –ü–æ–∫–∞–∑–∞—Ç–∏ —á–µ—Ä–≥—É –≤—ñ–¥—Ç–≤–æ—Ä–µ–Ω–Ω—è.
*   `!nowplaying`: –ü–æ–∫–∞–∑–∞—Ç–∏ –ø–æ—Ç–æ—á–Ω–∏–π —Ç—Ä–µ–∫.

–í–∏ —Ç–∞–∫–æ–∂ –º–æ–∂–µ—Ç–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –∫–Ω–æ–ø–∫–∏ –ø—ñ–¥ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è–º "–ó–∞—Ä–∞–∑ –≥—Ä–∞—î" –¥–ª—è –∫–µ—Ä—É–≤–∞–Ω–Ω—è.

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç—É

*   `main.py`: –ì–æ–ª–æ–≤–Ω–∏–π —Ñ–∞–π–ª –¥–ª—è –∑–∞–ø—É—Å–∫—É –±–æ—Ç–∞, –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –∫–æ–≥—ñ–≤ —Ç–∞ –æ–±—Ä–æ–±–∫–∏ –æ—Å–Ω–æ–≤–Ω–∏—Ö –ø–æ–¥—ñ–π.
*   `config.py`: –ó–±–µ—Ä—ñ–≥–∞—î –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ–π–Ω—ñ –∑–º—ñ–Ω–Ω—ñ (—Ç–æ–∫–µ–Ω, –æ–ø—Ü—ñ—ó yt-dlp/ffmpeg).
*   `utils.py`: –ú—ñ—Å—Ç–∏—Ç—å –¥–æ–ø–æ–º—ñ–∂–Ω—ñ —Ñ—É–Ω–∫—Ü—ñ—ó (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, —Ñ–æ—Ä–º–∞—Ç—É–≤–∞–Ω–Ω—è —Ç—Ä–∏–≤–∞–ª–æ—Å—Ç—ñ).
*   `audio_source.py`: –í–∏–∑–Ω–∞—á–∞—î –∫–ª–∞—Å `YTDLSource` –¥–ª—è –æ—Ç—Ä–∏–º–∞–Ω–Ω—è –∞—É–¥—ñ–æ –∑ yt-dlp.
*   `cogs/`: –ü–∞–ø–∫–∞ –¥–ª—è –º–æ–¥—É–ª—ñ–≤ (–∫–æ–≥—ñ–≤).
    *   `music_cog.py`: –ú—ñ—Å—Ç–∏—Ç—å —É—Å—ñ –∫–æ–º–∞–Ω–¥–∏ —Ç–∞ –ª–æ–≥—ñ–∫—É, –ø–æ–≤'—è–∑–∞–Ω—É –∑ –º—É–∑–∏–∫–æ—é.
*   `.env`: –§–∞–π–ª –¥–ª—è –∑–±–µ—Ä—ñ–≥–∞–Ω–Ω—è —Å–µ–∫—Ä–µ—Ç–Ω–æ–≥–æ —Ç–æ–∫–µ–Ω—É –±–æ—Ç–∞ (–Ω–µ –¥–æ–¥–∞–≤–∞–π—Ç–µ –π–æ–≥–æ –¥–æ Git!).
*   `requirements.txt`: –°–ø–∏—Å–æ–∫ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π Python.
*   `README.md`: –¶–µ–π —Ñ–∞–π–ª.